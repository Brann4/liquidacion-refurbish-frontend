<div class="flex flex-col gap-6">
    <p-toolbar>
        <ng-template pTemplate="start">
            <breadcrumb-header [breadcrumbs]="breadcrumbs" title="MÓDULO DE CONTRATAS" />
        </ng-template>
        <ng-template pTemplate="end">
            <p-button label="Nuevo" icon="pi pi-plus" severity="primary" [raised]="true" size="large"
                      (onClick)="openCreateModal()" />
        </ng-template>
    </p-toolbar>

    <p-card>
        <p-table
            #dataTable
            dataKey="id"
            [value]="contratas()"
            [rows]="10"
            [rowHover]="true"
            [paginator]="true"
            [showCurrentPageReport]="true"
            [rowsPerPageOptions]="[10, 20, 30]"
            [globalFilterFields]="['ruc', 'razonSocial']"
            [loading]="isLoadingEntities()"
            currentPageReportTemplate="Visualizar {first} a {last} de {totalRecords} registros"
            [tableStyle]="{ 'min-width': '75rem' }"
        >
            <ng-template pTemplate="caption">
                <div class="flex items-center justify-between">
                    <h5>Administrador de Contratas</h5>
                    <p-iconfield>
                        <p-inputicon class="pi pi-search" />
                        <input pInputText type="text" (input)="onGlobalFilter($event, dataTable)"
                               placeholder="Buscar RUC o Razón Social" />
                    </p-iconfield>
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th style="width:20%">
                        Id
                    </th>
                    <th pSortableColumn="ruc" style="width:25%">
                        <div class="flex items-center gap-2">
                            RUC
                            <p-sortIcon field="ruc" />
                        </div>
                    </th>
                    <th pSortableColumn="razonSocial" style="width:35%">
                        <div class="flex items-center gap-2">
                            Razón Social
                            <p-sortIcon field="razonSocial" />
                        </div>
                    </th>
                    <th style="width:20%"></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td>{{ item.id }}</td>
                    <td>{{ item.ruc }}</td>
                    <td>{{ item.razonSocial }}</td>
                    <td>
                        <div class="flex items-center gap-2">
                            <p-button icon="pi pi-pencil" severity="info" [rounded]="true" [outlined]="true"
                                      (click)="onEditContrata(item)" />
                            <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true"
                                      (click)="onDeleteContrata(item)" />
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-card>
</div>

<app-contrata-modal />
