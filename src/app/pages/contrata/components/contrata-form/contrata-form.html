<p-dialog
    [modal]="true"
    [visible]="visible()"
    [breakpoints]="{ '650px': '90vw' }"
    [style]="{ 'width': '25vw', 'min-width': '400px' }"
    (visibleChange)="onDialogVisibilityChange($event)"
    [header]="formTitle()"
    [closable]="true"
    [draggable]="false"
    [resizable]="false">

    <ng-template pTemplate="content">
        <form [formGroup]="contrataForm" (ngSubmit)="onSubmitForm()" class="flex flex-col gap-4 p-4">
            <div class="flex flex-col gap-2">
                <label for="ruc" class="text-sm font-medium">RUC</label>
                <input
                    pInputText
                    id="ruc"
                    formControlName="ruc"
                    placeholder="Ej: 20123456789"
                    maxlength="11"
                    [invalid]="isInvalid(controls.ruc)"
                />
                @if (isInvalid(controls.ruc)) {
                    <app-form-control-error [control]="controls.ruc" controlName="RUC" />
                }
            </div>

            <div class="flex flex-col gap-2">
                <label for="razonSocial" class="text-sm font-medium">Razón Social</label>
                <input
                    pInputText
                    id="razonSocial"
                    formControlName="razonSocial"
                    placeholder="Ej: Empresa SAC"
                    maxlength="200"
                    [invalid]="isInvalid(controls.razonSocial)"
                />
                @if (isInvalid(controls.razonSocial)) {
                    <app-form-control-error [control]="controls.razonSocial" controlName="Razón Social" />
                }
            </div>
        </form>
    </ng-template>

    <ng-template pTemplate="footer">
        <p-button label="Cancelar" icon="pi pi-times" text (click)="onCancelForm()" />
        <p-button label="Guardar" icon="pi pi-check" (click)="onSubmitForm()" [loading]="isLoading()"
                  [disabled]="isLoading()" />
    </ng-template>
</p-dialog>
